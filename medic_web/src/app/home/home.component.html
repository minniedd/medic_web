<div class="d-grid gap-2 d-md-flex justify-content-md-end">
  <button class="btn btn-primary me-md-2" type="button" (click)="openModal()">ADD USER</button>
  <button (click)="logout()" class="btn btn-primary" type="button">LOG OUT</button>
</div>

<table class="table">
  <thead class="table-light">
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Username</th>
      <th>Last Login Date</th>
      <th>Details</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let user of users">
      <td>{{ user.id }}</td>
      <td>{{ user.name }}</td>
      <td>{{ user.username }}</td>
      <td>{{ user.lastLoginDate | date }}</td>
      <td><button (click)="fetchDetails(user.id)" class="btn btn-warning">View Details</button></td>
    </tr>
  </tbody>
</table>


<div *ngIf="modalShow">
  <div class="modal fade show" id="exampleModalLive" tabindex="-1" aria-labelledby="exampleModalLiveLabel" aria-modal="true" role="dialog" style="display: block;">
    <div class="modal-dialog">
      <div class="modal-content custom-modal">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLiveLabel">Add User</h1>
          <button style="border: none; background-color: white; font-weight: bolder" class="btn-close" data-bs-dismiss="modal" (click)="close()" aria-label="Close">X
          </button>
        </div>
        <div class="modal-body">
          <form (ngSubmit)="saveUser()">
            <div>
              <label class="form-label">Username:</label>
              <input class="form-control" [(ngModel)]="addUsers.username" name="username" required>
            </div>
            <div>
              <label class="form-label">Password:</label>
              <input type="password" class="form-control" [(ngModel)]="addUsers.password" name="password" required>
            </div>
            <div>
              <label class="form-label">Name:</label>
              <input class="form-control" [(ngModel)]="addUsers.name" name="name" required>
            </div>
            <div>
              <label class="form-label">Orders (0-10):</label>
              <input type="number" class="form-control" [(ngModel)]="addUsers.orders" name="orders" min="0" max="10" required>
            </div>
            <div>
              <label class="form-label">Image URL:</label>
              <input class="form-control" [(ngModel)]="addUsers.imageUrl" name="imageUrl">
            </div>
            <div>
              <label class="form-label">Date of Birth:</label>
              <input type="date" class="form-control" [(ngModel)]="addUsers.birthDate" name="birthDate">
            </div>
            <div class="mt-3">
              <button type="button" class="btn btn-secondary" (click)="close()" data-bs-dismiss="modal">Close</button>
              <button type="submit" class="btn btn-primary">Save</button>
            </div>
          </form>
        </div>
    </div>
  </div>
</div>
</div>


<div *ngIf="selectedUser!=null">
  <div class="modal fade show" id="userDetailsModal" tabindex="-1" aria-labelledby="exampleModalLiveLabel" aria-modal="true" role="dialog" style="display: block;">
    <div class="modal-dialog">
      <div class="modal-content custom-modal">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="userDetailsModalLabel">User Details</h1>
          <button style="border: none; background-color: white; font-weight: bolder" class="btn-close" data-bs-dismiss="modal" (click)="selectedUser=null" aria-label="Close">X
          </button>
        </div>
        <div class="modal-body">
          <form>
            <div>
              <label class="form-label">ID:</label>
              <input class="form-control" [value]="selectedUser.id" disabled>
            </div>
            <div>
              <label class="form-label">Name:</label>
              <input class="form-control" [(ngModel)]="selectedUser.name" name="name" required>
            </div>
            <div>
              <label class="form-label">Username:</label>
              <input class="form-control" [(ngModel)]="selectedUser.username" name="username" required>
            </div>
            <div>
              <label class="form-label">Orders (0-10):</label>
              <input type="number" class="form-control" [(ngModel)]="selectedUser.orders" name="orders" min="0" max="10" required>
            </div>
            <div>
              <label class="form-label">Image URL:</label>
              <input class="form-control" [(ngModel)]="selectedUser.imageUrl" name="imageUrl">
            </div>
            <div>
              <label class="form-label">Date of Birth:</label>
              <input type="date" class="form-control" [(ngModel)]="selectedUser.birthDate" name="birthDate">
            </div>
            <div>
              <label class="form-label">Last Login Date:</label>
              <input class="form-control" [value]="selectedUser.lastLoginDate" disabled>
            </div>
            <div>
              <label class="form-label">Status:</label>
              <input class="form-control" [(ngModel)]="selectedUser.status" name="status">
            </div>
            <div class="mt-3">
              <button type="button" class="btn btn-secondary" (click)="selectedUser=null" data-bs-dismiss="modal">Close</button>
              <button type="button" class="btn btn-danger" data-bs-dismiss="modal" (click)="blockUser(selectedUser.id)">Block</button>
              <button type="submit" class="btn btn-primary" (click)="Save()">Save</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>


